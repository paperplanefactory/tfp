function resizeInput(){var e=$(this).val(),t=e.length-2;$(this).attr("size",t)}function findDayAndMonth(){1==day?dayName="1":2==day?dayName="2":3==day?dayName="3":4==day?dayName="4":5==day?dayName="5":6==day?dayName="6":7==day?dayName="7":8==day?dayName="8":9==day?dayName="9":dayName=day,1==month?monthName="Gennaio":2==month?monthName="Febbraio":3==month?monthName="Marzo":4==month?monthName="Aprile":5==month?monthName="Maggio":6==month?monthName="Giugno":7==month?monthName="Luglio":8==month?monthName="Agosto":9==month?monthName="Settembre":10==month?monthName="Ottobre":11==month?monthName="Novembre":12==month&&(monthName="Dicembre")}function toValidDateStart(e){return e.replace(/(\d{2})(\/)(\d{2})/,"$3$2$1")}function toValidDateEnd(e){return e.replace(/(\d{2})(\/)(\d{2})/,"$3$2$1")}function filter_posts_button(){""===to_url&&(to_url="-"),"23:59:59"===hourToApi&&(hourToUrl="giornata",time_interval="to"),"13:00:00"===hourToApi&&(hourToUrl="mattino",time_interval="to"),"20:00:00"===hourToApi&&(hourToUrl="pomeriggio",time_interval="to"),"20:00:01"===hourToApi&&(hourToUrl="sera",time_interval="from"),window.history.pushState("object or string","Title","/calendario-spettacoli/"+startDateToApi+endDateToApi+"/"+hourToUrl+"/"+to_url),$(".disableable").addClass("no-more-requests"),$("#loading").fadeIn(300),$("#result").fadeOut(300),$("#result").load("/app/wp-admin/admin-ajax.php?action=api&v=snippet&api=calendario&from="+startDateToApi+"&to="+endDateToApi+"&time="+hourToApi+"&time_interval="+time_interval+"&taxonomies="+to_input+"&date_not_defined=true&source="+here+"&hourToUrl=ii",function(e,t,a){if("error"==t){var o="Sorry but there was an error: ";$("#error").html(o+a.status+" "+a.statusText)}else $("#loading").fadeOut(300),$("#result").fadeIn(300),$(".no-more-requests").removeClass("no-more-requests"),$("img.lazymage, img.lazy, div.lazy, li.lazy").lazyload({effect:"fadeIn",load:function(){$(".lazy-placehoder").fadeOut(150)}})})}var to_input,to_percorso,to_url,to_subb,startDateToApi,endDateToApi,startTime,hourToApi,hourToUrl;if("giornata"===hourToUrl&&(hourToApi="23:59:59",time_interval="to"),"mattino"===hourToUrl&&(hourToApi="13:00:00",time_interval="to"),"pomeriggio"===hourToUrl&&(hourToApi="20:00:00",time_interval="to"),"sera"===hourToUrl&&(hourToApi="20:00:01",time_interval="from"),"undefined"==typeof hourToUrl||null===hourToUrl||""===hourToUrl){var hourToApi="23:59:59";time_interval="to"}if("home"===here)var numberOfDaysToAdd=0,arrowJump=1;else var numberOfDaysToAdd=7,arrowJump=7;if("home"===here)if("undefined"==typeof endDateToApi||null===endDateToApi||""===endDateToApi){var getDateTo=new Date;getDateTo.setDate(getDateTo.getDate()+numberOfDaysToAdd),yr=getDateTo.getFullYear(),month=("0"+(getDateTo.getMonth()+1)).slice(-2),day=("0"+getDateTo.getDate()).slice(-2),endDate=yr+""+month+day;var endDateFor=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),getDateToWeekHandle=new Date(toValidDateEnd(endDateFor)),$(".datepicker-to").val(dayName+" "+monthName+" al Parenti"),date_mod=$("datepicker-from").val(),$(".calendar-dates-end").each(resizeInput)}else{reconvertFrom=startDateToApi.replace(/(\d\d\d\d)(\d\d)(\d\d)/g,"$2/$3/$1"),getDateFromWeekHandle=new Date(reconvertFrom),getDateFromWeekHandle.setDate(getDateFromWeekHandle.getDate()),yr=getDateFromWeekHandle.getFullYear(),month=("0"+(getDateFromWeekHandle.getMonth()+1)).slice(-2),day=("0"+getDateFromWeekHandle.getDate()).slice(-2),startDate=yr+""+month+day;var startDateFor=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName),reconvertTo=endDateToApi.replace(/(\d\d\d\d)(\d\d)(\d\d)/g,"$2/$3/$1"),getDateToWeekHandle=new Date(reconvertTo),getDateToWeekHandle.setDate(getDateToWeekHandle.getDate()),yr=getDateToWeekHandle.getFullYear(),month=("0"+(getDateToWeekHandle.getMonth()+1)).slice(-2),day=("0"+getDateToWeekHandle.getDate()).slice(-2),endDate=yr+""+month+day;var endDateFor=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),endDate!=startDate?(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" - "+dayName+" "+monthName+" al Parenti")):(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" al Parenti")),$(".calendar-dates-end").each(resizeInput),startDateToApi!=endDateToApi?(arrowJump=7,$(".one-week").addClass("current-filter"),$(".one-day").removeClass("current-filter")):(arrowJump=1,$(".one-week").removeClass("current-filter"),$(".one-day").addClass("current-filter"))}else if("undefined"==typeof endDateToApi||null===endDateToApi||""===endDateToApi){var getDateFrom=new Date,getDateFromWeekHandle=new Date;yr=getDateFrom.getFullYear(),month=("0"+(getDateFrom.getMonth()+1)).slice(-2),day=("0"+getDateFrom.getDate()).slice(-2),startDate=yr+""+month+day;var startDateFor=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName);var getDateTo=new Date,numberOfDaysToAdd=arrowJump;getDateTo.setDate(getDateTo.getDate()+numberOfDaysToAdd),yr=getDateTo.getFullYear(),month=("0"+(getDateTo.getMonth()+1)).slice(-2),day=("0"+getDateTo.getDate()).slice(-2),endDate=yr+""+month+day;var endDateFor=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" - "+dayName+" "+monthName+" al Parenti"),getDateToWeekHandle=new Date(toValidDateEnd(endDateFor)),date_mod=$("datepicker-from").val(),$(".calendar-dates-end").each(resizeInput)}else{reconvertFrom=startDateToApi.replace(/(\d\d\d\d)(\d\d)(\d\d)/g,"$2/$3/$1"),getDateFromWeekHandle=new Date(reconvertFrom),getDateFromWeekHandle.setDate(getDateFromWeekHandle.getDate()),yr=getDateFromWeekHandle.getFullYear(),month=("0"+(getDateFromWeekHandle.getMonth()+1)).slice(-2),day=("0"+getDateFromWeekHandle.getDate()).slice(-2),startDate=yr+""+month+day;var startDateFor=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName),reconvertTo=endDateToApi.replace(/(\d\d\d\d)(\d\d)(\d\d)/g,"$2/$3/$1"),getDateToWeekHandle=new Date(reconvertTo),getDateToWeekHandle.setDate(getDateToWeekHandle.getDate()),yr=getDateToWeekHandle.getFullYear(),month=("0"+(getDateToWeekHandle.getMonth()+1)).slice(-2),day=("0"+getDateToWeekHandle.getDate()).slice(-2),endDate=yr+""+month+day;var endDateFor=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),endDate!=startDate?(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" - "+dayName+" "+monthName+" al Parenti")):(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" al Parenti")),$(".calendar-dates-end").each(resizeInput),startDateToApi!=endDateToApi?(arrowJump=7,$(".one-week").addClass("current-filter"),$(".one-day").removeClass("current-filter")):(arrowJump=1,$(".one-week").removeClass("current-filter"),$(".one-day").addClass("current-filter"))}if($(".disableable").addClass("no-more-requests"),"undefined"==typeof startDateToApi||null===startDateToApi||""===startDateToApi){var getDateFrom=new Date;yr=getDateFrom.getFullYear(),month=("0"+(getDateFrom.getMonth()+1)).slice(-2),day=("0"+getDateFrom.getDate()).slice(-2),startDate=yr+""+month+day;var startDateFor=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),getDateFromWeekHandle=new Date(toValidDateStart(startDateFor)),$(".datepicker-to").val(dayName+" "+monthName+" al Parenti")}$(".one-day").unbind().click(function(){arrowJump=1,$(".disableable").addClass("no-more-requests");var e=new Date(getDateFromWeekHandle);new Date(getDateToWeekHandle);yr=e.getFullYear(),month=("0"+(e.getMonth()+1)).slice(-2),day=("0"+e.getDate()).slice(-2),startDate=yr+""+month+day;var t=day+"/"+month+"/"+yr;startDateToApi=startDate,endDateToApi=startDate,getDateFromWeekHandle=new Date(toValidDateStart(t)),getDateToWeekHandle=new Date(toValidDateEnd(t)),findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName+" al Parenti"),filter_posts_button(),$(".calendar-dates-end").each(resizeInput),$(this).addClass("current-filter"),$(".one-week").removeClass("current-filter")}),$(".one-week").unbind().click(function(){arrowJump=7,$(".disableable").addClass("no-more-requests");var e=new Date(getDateToWeekHandle);yr=e.getFullYear(),month=("0"+(e.getMonth()+1)).slice(-2),day=("0"+e.getDate()).slice(-2),startDate=yr+""+month+day;var t=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName),getDateFromWeekHandle=new Date(toValidDateStart(t));var a=new Date(e),o=arrowJump;a.setDate(a.getDate()+o),yr=a.getFullYear(),month=("0"+(a.getMonth()+1)).slice(-2),day=("0"+a.getDate()).slice(-2),endDate=yr+""+month+day;var r=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" - "+dayName+" "+monthName+" al Parenti"),getDateToWeekHandle=new Date(toValidDateEnd(r)),filter_posts_button(),$(".calendar-dates-end").each(resizeInput),$(".hide-separator, .datepicker-to").show(),$(this).addClass("current-filter"),$(".one-day").removeClass("current-filter")}),$(".one-week-more").unbind().click(function(){$(".disableable").addClass("no-more-requests");var e=new Date(getDateToWeekHandle);1==arrowJump&&e.setDate(e.getDate()+1),yr=e.getFullYear(),month=("0"+(e.getMonth()+1)).slice(-2),day=("0"+e.getDate()).slice(-2),startDate=yr+""+month+day;var t=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName),getDateFromWeekHandle=new Date(toValidDateStart(t));var a=new Date(getDateToWeekHandle),o=arrowJump;a.setDate(a.getDate()+o),yr=a.getFullYear(),month=("0"+(a.getMonth()+1)).slice(-2),day=("0"+a.getDate()).slice(-2),endDate=yr+""+month+day;var r=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),endDate!=startDate?(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" - "+dayName+" "+monthName+" al Parenti")):(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" al Parenti")),getDateToWeekHandle=new Date(toValidDateEnd(r)),getDateFromWeekHandle=new Date(toValidDateEnd(t)),filter_posts_button(),$(".calendar-dates-end").each(resizeInput)}),$(".one-week-less").unbind().click(function(){$(".disableable").addClass("no-more-requests");var e=new Date(getDateFromWeekHandle);1==arrowJump&&e.setDate(e.getDate()-1),yr=e.getFullYear(),month=("0"+(e.getMonth()+1)).slice(-2),day=("0"+e.getDate()).slice(-2),endDate=yr+""+month+day;var t=day+"/"+month+"/"+yr;endDateToApi=endDate,findDayAndMonth(),$(".datepicker-to").val(dayName+" "+monthName),getDateToWeekHandle=new Date(toValidDateStart(t));var a=new Date(getDateFromWeekHandle),o=arrowJump;a.setDate(a.getDate()-o),yr=a.getFullYear(),month=("0"+(a.getMonth()+1)).slice(-2),day=("0"+a.getDate()).slice(-2),startDate=yr+""+month+day;var r=day+"/"+month+"/"+yr;startDateToApi=startDate,findDayAndMonth(),endDate!=startDate?(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(dayName+" "+monthName+" - "+mydate+" al Parenti")):(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" al Parenti")),getDateFromWeekHandle=new Date(toValidDateStart(r)),filter_posts_button(),$(".calendar-dates-end").each(resizeInput)}),$(".datepicker-from").datepicker({language:"en",dateFormat:"d MM",todayButton:!0,clearButton:!0,autoClose:!0,inline:!1,onShow:function(){new Date(getDateFromWeekHandle)},onSelect:function(e,t){var a=new Date(t),o=t.getFullYear(),r=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2),d=o+""+r+n;startDateToApi=d,getDateFromWeekHandle=a,1==n?dayName="1":2==n?dayName="2":3==n?dayName="3":4==n?dayName="4":5==n?dayName="5":6==n?dayName="6":7==n?dayName="7":8==n?dayName="8":9==n?dayName="9":dayName=n,1==r?monthName="Gennaio":2==r?monthName="Febbraio":3==r?monthName="Marzo":4==r?monthName="Aprile":5==r?monthName="Maggio":6==r?monthName="Giugno":7==r?monthName="Luglio":8==r?monthName="Agosto":9==r?monthName="Settembre":10==r?monthName="Ottobre":11==r?monthName="Novembre":12==r&&(monthName="Dicembre"),mydate=$(".datepicker-to").val(),$(".datepicker-to").val(dayName+" "+monthName+" al Parenti");var l=new Date(a);1==arrowJump?(l.setDate(l.getDate()),$(".one-day").addClass("current-filter"),$(".one-week").removeClass("current-filter")):(l.setDate(l.getDate()+arrowJump),$(".one-day").removeClass("current-filter"),$(".one-week").addClass("current-filter")),o=l.getFullYear(),r=("0"+(l.getMonth()+1)).slice(-2),n=("0"+l.getDate()).slice(-2),endDate=o+""+r+n,endDateToApi=endDate,getDateToWeekHandle=l;endDateToApi=endDate,1==n?dayName="1":2==n?dayName="2":3==n?dayName="3":4==n?dayName="4":5==n?dayName="5":6==n?dayName="6":7==n?dayName="7":8==n?dayName="8":9==n?dayName="9":dayName=n,1==r?monthName="Gennaio":2==r?monthName="Febbraio":3==r?monthName="Marzo":4==r?monthName="Aprile":5==r?monthName="Maggio":6==r?monthName="Giugno":7==r?monthName="Luglio":8==r?monthName="Agosto":9==r?monthName="Settembre":10==r?monthName="Ottobre":11==r?monthName="Novembre":12==r&&(monthName="Dicembre"),endDate!=d&&(mydate=$(".datepicker-to").val(),$(".datepicker-to").val(mydate+" - "+dayName+" "+monthName+" al Parenti")),filter_posts_button(),$(".calendar-dates-end").each(resizeInput),$(".disableable").addClass("no-more-requests")}}),$(".this-voice").unbind().click(function(){to_subb=$(this).attr("id"),to_input=$(this).attr("value"),to_percorso="",to_url=$(this).attr("slug"),percorso=$(this).attr("percorso"),filter_posts_button(),"true"===percorso?(""!=to_subb?($(".top-opener-1-txt-replace").html(to_subb).addClass("txt-3-color"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color")):($(".top-opener-2-txt-replace").html("Tipo di evento").addClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi").removeClass("txt-3-color")),show_percorsi_tax_info()):"false"===percorso?""!=to_subb?($(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html(to_subb).addClass("txt-3-color")):($(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi").removeClass("txt-3-color")):""!=to_subb?($(".top-opener-2-txt-replace").html(to_subb).addClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi").removeClass("txt-3-color")):($(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi").removeClass("txt-3-color"))}),$(".this-voice-fascia").unbind().click(function(){to_subb=$(this).attr("id"),hourToApi=$(this).attr("value"),$(".top-opener-3-txt-replace").html(to_subb),filter_posts_button()}),$(".sub-opener").hide(),$(".top-opener-1").click(function(){$("html").css("overflowY","hidden"),$("body").addClass("occupy-scrollbar"),$(".modal-set").fadeIn(10),$(".fake-select-1").fadeIn(10)}),$(".top-opener-2").click(function(){$("html").css("overflowY","hidden"),$("body").addClass("occupy-scrollbar"),$(".modal-set").fadeIn(10),$(".fake-select-2").fadeIn(10)}),$(".top-opener-3").click(function(){$("html").css("overflowY","hidden"),$("body").addClass("occupy-scrollbar"),$(".modal-set").fadeIn(10),$(".fake-select-3").fadeIn(10)}),$(".modal-set, .fake-select, .this-voice").click(function(){$("html").css("overflowY","scroll"),$("body").removeClass("occupy-scrollbar"),$(".modal-set").fadeOut(10),$(".fake-select-1, .fake-select-2, .fake-select-3").fadeOut(10)}),$(document).ready(function(){function e(){"true"===percorso?""!=to_subb?($(".top-opener-1-txt-replace").html(to_subb),$(".top-opener-2-txt-replace").html("Tipo di evento")):($(".top-opener-2-txt-replace").html("Tipo di evento"),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi")):""!=to_subb?($(".top-opener-2-txt-replace").html(to_subb),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi")):($(".top-opener-2-txt-replace").html("Tipo di evento"),$(".top-opener-1-txt-replace").html("Abbonamenti e percorsi")),""!=hourToUrl?("mattino"===hourToUrl&&$(".top-opener-3-txt-replace").html("Mattino"),"pomeriggio"===hourToUrl&&$(".top-opener-3-txt-replace").html("Pomeriggio"),"sera"===hourToUrl&&$(".top-opener-3-txt-replace").html("Sera")):$(".top-opener-3-txt-replace").html("Fascia oraria"),$("#loading").fadeIn(300),$("#result").fadeOut(300),$("#result").load("/app/wp-admin/admin-ajax.php?action=api&v=snippet&api=calendario&from="+startDateToApi+"&to="+endDateToApi+"&time="+hourToApi+"&time_interval="+time_interval+"&taxonomies="+to_input+"&date_not_defined=true&source="+here+"&hourToUrl=ii",function(e,t,a){if("error"==t){var o="Sorry but there was an error: ";$("#error").html(o+a.status+" "+a.statusText)}else $("#loading").fadeOut(300),$("#result").fadeIn(300),$(".no-more-requests").removeClass("no-more-requests"),$("img.lazymage, img.lazy, div.lazy, li.lazy").lazyload({effect:"fadeIn",load:function(){$(".lazy-placehoder").fadeOut(150)}})})}e()});