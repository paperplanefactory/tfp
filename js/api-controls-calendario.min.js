function findStartDayAndMonth(){dayFromName=dayFrom.replace(/^0+/,""),1==monthFrom?monthFromName="Gennaio":2==monthFrom?monthFromName="Febbraio":3==monthFrom?monthFromName="Marzo":4==monthFrom?monthFromName="Aprile":5==monthFrom?monthFromName="Maggio":6==monthFrom?monthFromName="Giugno":7==monthFrom?monthFromName="Luglio":8==monthFrom?monthFromName="Agosto":9==monthFrom?monthFromName="Settembre":10==monthFrom?monthFromName="Ottobre":11==monthFrom?monthFromName="Novembre":12==monthFrom&&(monthFromName="Dicembre")}function findEndDayAndMonth(){dayToName=dayTo.replace(/^0+/,""),1==monthTo?monthToName="Gennaio":2==monthTo?monthToName="Febbraio":3==monthTo?monthToName="Marzo":4==monthTo?monthToName="Aprile":5==monthTo?monthToName="Maggio":6==monthTo?monthToName="Giugno":7==monthTo?monthToName="Luglio":8==monthTo?monthToName="Agosto":9==monthTo?monthToName="Settembre":10==monthTo?monthToName="Ottobre":11==monthTo?monthToName="Novembre":12==monthTo&&(monthToName="Dicembre")}function startDateConverter(){yrFrom=getDateFrom.getFullYear(),monthFrom=("0"+(getDateFrom.getMonth()+1)).slice(-2),dayFrom=("0"+getDateFrom.getDate()).slice(-2),startDateToApi=yrFrom+""+monthFrom+dayFrom}function endDateConverter(){getDateTo=getDateFrom,getDateTo.setDate(getDateFrom.getDate()+timeInterval),yrTo=getDateTo.getFullYear(),monthTo=("0"+(getDateTo.getMonth()+1)).slice(-2),dayTo=("0"+getDateTo.getDate()).slice(-2),endDateToApi=yrTo+""+monthTo+dayTo,findStartDayAndMonth(),findEndDayAndMonth(),monthFromName===monthToName?$(".datepicker-from, .datepicker-to").val(dayFromName+" - "+dayToName+" "+monthToName):$(".datepicker-from, .datepicker-to").val(dayFromName+" "+monthFromName+" - "+dayToName+" "+monthToName),filter_posts_button()}function get_and_compile_dropdown(){filter_posts_button(),$(".filter-voice").removeClass("eraser"),"tipo-evento"===filtro&&($(".top-opener-2-txt-replace").html(term_name_trim).addClass("txt-3-color"),$(".fake-select-2 .top-opener-2-txt-replace").html(term_name).addClass("txt-3-color"),$(".this-voice").show(),$("#turn-off-"+term_id).hide(),$(".filter-voice").addClass("eraser"),$(".top-opener-1-txt-replace").html("Percorsi").removeClass("txt-3-color"),$(".top-opener-3-txt-replace").html("Abbonamenti").removeClass("txt-3-color"),$(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color")),"tipo-evento-remover"===filtro&&($(".top-opener-2-txt-replace").html(term_name_trim).removeClass("txt-3-color"),$(".fake-select-2 .top-opener-2-txt-replace").html(term_name).removeClass("txt-3-color"),$(".this-voice").show(),$(".fake-select-2 .filter-voice").removeClass("eraser"),$(".top-opener-1-txt-replace").html("Percorsi").removeClass("txt-3-color"),$(".top-opener-3-txt-replace").html("Abbonamenti").removeClass("txt-3-color"),$(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color")),"percorsi"===filtro&&($(".top-opener-1-txt-replace").html(term_name_trim).addClass("txt-3-color"),$(".fake-select-1 .top-opener-1-txt-replace").html(term_name).addClass("txt-3-color"),$(".this-voice").show(),$("#turn-off-"+term_id).hide(),$(".fake-select-1 .filter-voice").addClass("eraser"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-3-txt-replace").html("Abbonamenti").removeClass("txt-3-color"),$(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color")),"percorsi-remover"===filtro&&($(".top-opener-1-txt-replace").html(term_name_trim).removeClass("txt-3-color"),$(".fake-select-1 .top-opener-1-txt-replace").html(term_name).removeClass("txt-3-color"),$(".this-voice").show(),$(".fake-select-1 .filter-voice").removeClass("eraser"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-3-txt-replace").html("Abbonamenti").removeClass("txt-3-color"),$(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color")),"abbonamenti"===filtro&&($(".top-opener-3-txt-replace").html(term_name_trim).addClass("txt-3-color"),$(".fake-select-3 .top-opener-3-txt-replace").html(term_name).addClass("txt-3-color"),$(".this-voice").show(),$("#turn-off-"+term_id).hide(),$(".fake-select-3 .filter-voice").addClass("eraser"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Percorsi").removeClass("txt-3-color"),$(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color")),"abbonamenti-remover"===filtro&&($(".top-opener-3-txt-replace").html(term_name_trim).addClass("txt-3-color"),$(".fake-select-3 .top-opener-3-txt-replace").html(term_name).removeClass("txt-3-color"),$(".this-voice").show(),$(".fake-select-3 .filter-voice").removeClass("eraser"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Percorsi").removeClass("txt-3-color"),$(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color")),"fascia-oraria"===filtro&&($(".top-opener-4-txt-replace").html(fascia_name).addClass("txt-3-color"),$(".fake-select-4 .top-opener-3-txt-replace").html(fascia_name).addClass("txt-3-color"),$(".this-voice").show(),$("#turn-off-"+term_id).hide(),$(".fake-select-4 .filter-voice").addClass("eraser"),$(".top-opener-3-txt-replace").html("Abbonamenti").removeClass("txt-3-color"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Percorsi").removeClass("txt-3-color")),"fascia-oraria-remover"===filtro&&($(".top-opener-4-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color"),$(".fake-select-4 .top-opener-3-txt-replace").html("Qualsiasi orario").removeClass("txt-3-color"),$(".this-voice").show(),$(".fake-select-4 .filter-voice").removeClass("eraser"),$(".top-opener-2-txt-replace").html("Tipo di evento").removeClass("txt-3-color"),$(".top-opener-1-txt-replace").html("Percorsi").removeClass("txt-3-color"),$(".top-opener-3-txt-replace").html("Abbonamenti").removeClass("txt-3-color"))}function filter_posts_button(){$("html").css("overflowY","scroll"),$("body").removeClass("occupy-scrollbar"),$(".modal-set").fadeOut(10),$(".top-open").fadeOut(10),$(".disableable").addClass("no-more-requests"),"giornata"===hourToUrl&&(hourToApi="00:00:01",time_interval="from",term_id=""),"mattino"===hourToUrl&&(hourToApi="13:00:00",time_interval="to",term_id=""),"pomeriggio"===hourToUrl&&(hourToApi="20:00:00",time_interval="to",term_id=""),"sera"===hourToUrl&&(hourToApi="20:00:01",time_interval="from",term_id=""),"undefined"!=typeof hourToUrl&&null!==hourToUrl&&""!==hourToUrl||(hourToApi="00:00:01",time_interval="from",hourToUrl="giornata"),"undefined"!=typeof term_slug&&null!==term_slug&&""!==term_slug||(term_slug="-"),window.history.pushState("object or string","Title","/calendario-spettacoli/"+startDateToApi+endDateToApi+"/"+hourToUrl+"/"+term_slug+"/"),$(".disableable").addClass("no-more-requests"),$("#loading").fadeIn(300),$("#result").fadeOut(300),$("#result").load("/app/wp-admin/admin-ajax.php?action=api&v=snippet&api=calendario&from="+startDateToApi+"&to="+endDateToApi+"&time="+hourToApi+"&time_interval="+time_interval+"&taxonomies="+term_id+"&date_not_defined=true&source="+here+"&hourToUrl=ii",function(e,t,o){if("error"==t){var r="Sorry but there was an error: ";$("#error").html(r+o.status+" "+o.statusText)}else $("#loading").fadeOut(300),$("#result").fadeIn(300),$(".no-more-requests").removeClass("no-more-requests"),$("img.lazymage, img.lazy, div.lazy, li.lazy").lazyload({effect:"fadeIn",load:function(){$(".lazy-placehoder").fadeOut(150)}})})}var filtro,term_name,term_name_trim,term_slug,term_id,fascia_name,startTime;if("undefined"==typeof startDateToApi||null===startDateToApi||""===startDateToApi){var getDateFrom;getDateFrom=new Date}else reconvertFrom=startDateToApi.replace(/(\d\d\d\d)(\d\d)(\d\d)/g,"$2/$3/$1"),getDateFrom=new Date(reconvertFrom);timeInterval=7,$(".one-week").click(function(){$(this).addClass("current-filter"),$(".one-month").removeClass("current-filter"),getDateFrom.setDate(getDateFrom.getDate()-30),timeInterval=7,startDateConverter(),endDateConverter()}),$(".one-month").click(function(){$(this).addClass("current-filter"),$(".one-week").removeClass("current-filter"),getDateFrom.setDate(getDateFrom.getDate()-7),timeInterval=30,startDateConverter(),endDateConverter()}),$(".one-week-more").click(function(){startDateConverter(),endDateConverter(),$("html, body").animate({scrollTop:0},200)}),$(".one-week-less").click(function(){getDateFrom.setDate(getDateFrom.getDate()-2*timeInterval),startDateConverter(),endDateConverter(),$("html, body").animate({scrollTop:0},200)}),startDateConverter(),endDateConverter(),$(".datepicker-from").datepicker({language:"en",dateFormat:"d MM",todayButton:!1,clearButton:!1,autoClose:!0,inline:!1,onSelect:function(e,t){getDateFrom=new Date(t),startDateConverter(),endDateConverter()}}),$(".this-voice").click(function(){filtro=$(this).attr("aria-label-drop-filtro"),term_name=$(this).attr("aria-label-term-name"),fascia_name=$(this).attr("aria-label-term-name"),hourToUrl=$(this).attr("aria-label-term-daypart"),term_name_trim=term_name.length>15?term_name.substring(0,15)+"...":term_name,term_slug=$(this).attr("aria-label-term-slug"),term_id=$(this).attr("aria-label-term-id"),get_and_compile_dropdown()}),$(".text-shortened").click(function(){filtro=$(this).attr("aria-label-drop-filtro"),$("html").css("overflowY","hidden"),$("body").addClass("occupy-scrollbar"),$(".modal-set").fadeIn(10),"tipo-evento"===filtro&&$(".fake-select-2").fadeIn(10),"percorsi"===filtro&&$(".fake-select-1").fadeIn(10),"abbonamenti"===filtro&&$(".fake-select-3").fadeIn(10),"fascia-oraria"===filtro&&$(".fake-select-4").fadeIn(10)}),$(".modal-set").click(function(){$("html").css("overflowY","scroll"),$("body").removeClass("occupy-scrollbar"),$(".modal-set").fadeOut(10),$(".top-open").fadeOut(10)}),$(document).ready(function(){get_and_compile_dropdown()});